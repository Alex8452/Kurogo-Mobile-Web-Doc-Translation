<?php
$page->title("Courses: " . $courseId)
     ->header($courseId);

$page->content_begin();
$courseIdEncoded = urlencode($courseId);
?>
        <form method="get" action="search.php">
	<h2><?=$courseId?></h2>

        <p class="nav">
        <? 
        foreach ($classes as $i => $class) {
          $className = $class['name'];
          
          $prevClassName = '';
          $nextClassName = '';
          if ($i > 0) {
            $prevClassName = $classes[$i-1]['name'];
          }
          if ($i < count($classes)-1) {
            $nextClassName = $classes[$i+1]['name'];
          }
          
          if ($className == $prevClassName || $className == $nextClassName) {
            // Multiple classes with the same name in a row, show instructors to differentiate      
            $staffName = '';
            foreach($class['staff']['instructors'] as $name) {
              $staffName = (strlen($staffName) ? ', ' : '').$name;
            }?>
    
       <a href="<?=detailURL($class, selfURL())?>"><?=$className?> : <?=$class["title"]?> (<?=$staffName?>)</a><br/><?
          } else {?>
            <a href="<?=detailURL($class, selfURL())?>"><?=$className?> : <?=$class["title"]?></a><br/><?
          }
        } 
        ?>
        </p>
	
        <? if($back) { ?>
  	   <p class="paging">
		<a href="<?=coursesURL($back)?>">&lt; Back</a>
	   </p>
        <? } ?>

                <p>
		<strong>Search in <?=$courseId?>:</strong><br/>
		<span class="inputcombo">
			<input class="forminput" type="search" id="filter" name="filter" />
                        <input class="forminput" type="hidden" id="courseGroup" name="courseGroup" value=""/>
                        <input class="forminput" type="hidden" id="courseName" name="courseName" value=\<?=$courseIdEncoded?>>
			<input class="combobutton" name="sch_btn" id="sch_btn" type="submit" value="Search" />
		</span>
	</p>
<?
$page->content_end();
$page->nav_link("./", "Courses Home");
?>
