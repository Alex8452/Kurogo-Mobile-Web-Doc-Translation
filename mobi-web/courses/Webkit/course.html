<?php
$page->title("Courses: " . $courseId)
     ->navbar_image('courses');
     
if (isset($_REQUEST['back'], $_REQUEST['courseGroup']) && $_REQUEST['back'] == 'School') {
  $courseGroup = stripslashes($_REQUEST['courseGroup']);
  
  $page->breadcrumbs($courseGroup, 'Listing');
  $page->breadcrumb_classes('crumb1');
  $page->breadcrumb_links('courses.php?which='.urlencode($courseGroup));
  $self = 'School|Listing';
  $selfParams = 'courseGroup='.urlencode($courseGroup).'&courseID='.urlencode($courseId);
} else {
  $page->breadcrumbs('Listing');
  $self = 'Listing';
  $selfParams = 'courseID='.urlencode($courseId);
}

$page->content_begin();
?>
	
	<div class="nonfocal">
		<h2><?=$courseId?></h2>
	</div>
	<ul class="results">
	<? 
	foreach ($classes as $i => $class) {
	  $className = $class['name'];
	  
	  $prevClassName = '';
	  $nextClassName = '';
	  if ($i > 0) {
	    $prevClassName = $classes[$i-1]['name'];
	  }
	  if ($i < count($classes)-1) {
	    $nextClassName = $classes[$i+1]['name'];
	  }
	  
   	  $staffName = '';
	  if ($className == $prevClassName || $className == $nextClassName) {
        // Multiple classes with the same name in a row, show instructors to differentiate      
        foreach($class['staff']['instructors'] as $name) {
          $staffName .= (strlen($staffName) ? ', ' : '').$name;
        }
        if (strlen($staffName)) {
          $staffName = ' ('.$staffName.')';
        }
      }?>

     <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?><?=$staffName?></a></li><?
	} 
	?>
	</ul>
<? $page->content_end(); ?>

