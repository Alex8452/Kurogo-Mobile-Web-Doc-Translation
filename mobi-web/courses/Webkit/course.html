<?php
$page->title("Courses: " . $courseId)
     ->navbar_image('stellar');
     
     
if (isset($_REQUEST['back'], $_REQUEST['courseGroup']) && $_REQUEST['back'] == 'School') {
  $courseGroup = stripslashes($_REQUEST['courseGroup']);
  
  $page->breadcrumbs('School', 'Listing');
  $page->breadcrumb_links('courses.php?which='.urlencode($courseGroup));
  $self = 'School|Listing';
  $selfParams = 'courseGroup='.urlencode($courseGroup).'&courseID='.urlencode($courseId);
} else {
  $page->breadcrumbs('Listing');
  $self = 'Listing';
  $selfParams = 'courseID='.urlencode($courseId);
}

$page->content_begin();
?>
	
	<div class="nonfocal">
		<h2><?=$courseId?></h2>
	</div>
	
	<ul class="results">
            <? for($ind=0; $ind < count($classes); $ind++) {

            $class = $classes[$ind];
            $className = $class["name"];

            if (($ind > 0) && ($ind < count($classes) - 1)){
            $prevClass = $classes[$ind - 1];
            $nextClass = $classes[$ind + 1];

            if (($class['name'] == $prevClass['name']) || ($class['name'] == $nextClass['name'])) {
            $staffName = '';
            foreach($class['staff']['instructors'] as $name) {
            $staffName = $name . ',' .$staffName;
            } $staffName = substr($staffName, 0 , -1); ?>

            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?> (<?=$staffName?>)</a></li>

            <? }
            else  {?>
            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?></a></li>
            <? }}

            else if (($ind > 0) && ($ind == count($classes) - 1)){
            $prevClass = $classes[$ind - 1];

            if (($class['name'] == $prevClass['name'])) {
            $staffName = '';
            foreach($class['staff']['instructors'] as $name) {
            $staffName = $name . ',' .$staffName;
            } $staffName = substr($staffName, 0 , -1); ?>

            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?> (<?=$staffName?>)</a></li>

            <? }
            else {?>
            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?></a></li>
            <? }}
            else if (($ind == 0) && ($ind <= count($classes) - 1)){
            $nextClass = $classes[$ind + 1];

            if (($class['name'] == $nextClass['name'])) {
            $staffName = '';
            foreach($class['staff']['instructors'] as $name) {
            $staffName = $name . ',' .$staffName;
            } $staffName = substr($staffName, 0 , -1); ?>

            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?> (<?=$staffName?>)</a></li>

            <? }
            else {?>
            <li><a href="<?=detailURL($class, $self, $selfParams)?>"><?=$className?> : <?=$class["title"]?></a></li>
            <? }} ?>
            <?} ?>
	</ul>

<? $page->content_end(); ?>

