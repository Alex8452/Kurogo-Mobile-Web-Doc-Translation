<?php
$page->title('Events: Details')
     ->navbar_image('calendar')
     ->header('Details');

// get a list of the category mappings first
$harvard_cat = Harvard_Calendar::get_categories(PATH_TO_EVENTS_CAT);

$page->content_begin();
?>
	<ul class="nav">
		<li class="nolink">
			<h2><?=$event->get_summary()?></h2>
			<br/>
			<?=$date_str?><br/><?=$time_of_day?>
		</li>

<? if(briefLocation($event)) { ?>
		<li><a href="<?=mapURL(briefLocation($event))?>" class="map"><?=briefLocation($event)?></a></li>
<? } ?>

		<li class="nolink"><?=$event->get_description()?></li>
<? if(isset($event->infophone)) { ?>

		<li><a href="<?=phoneURL($event->infophone)?>" class="phone"><?=$event->infophone?></a></li>
<? } ?>
                       
<? if(isset($event->infourl)) { ?>

			<li><a href="<?=$event->urlize?>" class="external" target="_new"><?=$event->infourl?></a></li>
<? } ?>

	</ul>
	
	<div class="focal">Categorized as: 
<? 
  $size = count($categories);
  foreach($categories as $index => $category) {
    $last = ($size-1 == $index);

    foreach($harvard_cat as $cat) {
		// The strings from $harvard_cat may be null-terminated, unlike the usual PHP strings, so trim before comparing.
        if (strcmp(trim($cat->get_name()), trim($category)) == 0) {
             $categoryFound = $cat;
		}
      }
    ?>
		<a href="<?=categoryURL($categoryFound)?>"><?=ucname($category)?></a>
<? 
    if(!$last) echo ",";
  }
?>
	</div>

<? $page->content_end(); ?>
