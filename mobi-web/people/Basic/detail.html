<?php

$page->title('Harvard People Directory: Detail')
     ->header('People Directory');

class Item {
  private $person;
  private $first = True;

  public function __construct($person)
  {
    $this->person = $person;
  }

  public function display($label, $field, $href=NULL, $class=NULL)
  {
    foreach($this->person->getField($field) as $value) {
      if ($this->first) {
        $this->first = False;
      } else {
        echo '<br />';
      }

      $formatted_value = $value;
      if ($href !== NULL) {
        $formatted_value = '<a href="' . $href($value) . '" class="' . $class . '">'
               . str_replace('$', '<br/>', $value) . '</a>';
      }
      ?>
      <span class="label"><?=$label?></span>
      <span class="value"><?=$formatted_value?></span>
      <?
    }
  }
}

$item = new Item($person);

$page->content_begin();
?>
	<div class="focal">
        <?
          $item->display('name: ', 'cn', NULL, NULL);
          $item->display('title: ', 'title', NULL, NULL);
          $item->display('dept: ', 'ou', NULL, NULL);
          $item->display('home: ', 'homephone', "phoneHREF", 'phone');
          $item->display('phone: ', 'telephonenumber', "phoneHREF", 'phone');
          $item->display('fax: ', 'facsimiletelephonenumber', "phoneHREF", 'phone');
          $item->display('address: ', 'address');
          $item->display('email: ', 'mail', "mailHREF", 'email');
          $item->display('office: ', 'postaladdress', "officeURL", 'map');
        ?>
	</div>

<? 

$page->content_end(); 
$page->nav_link("index.php", "People Directory Home");

?>
