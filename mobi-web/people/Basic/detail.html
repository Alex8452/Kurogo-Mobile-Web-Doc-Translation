<?php

$page->title('Harvard People Directory: Detail')
     ->header('People Directory');

class Item {
  private $person;
  private $first = True;

  public function __construct($person)
  {
    $this->person = $person;
  }

  public function display($label, $field, $href=NULL, $class=NULL)
  {
    foreach($this->person->getField($field) as $value) {
      $formatted_value = $value;
      if ($href !== NULL) {
        $formatted_value = '<a href="' . $href($value) . '" class="action ' . $class . '">'
               . str_replace('$', '<br/>', $value) . '</a>';
      }
      ?>
      <tr valign="top"><td><span class="dllabel"><?=$label?></span></td>
      <td><span class="value"><?=$formatted_value?></span></tr>
      <?
    }
  }
}

$item = new Item($person);

$page->content_begin();
?>
	<div class="focal">
		<table class="dl" cellpadding="0" cellspacing="0" border="0" style="margin: 0; padding: 0">
        <?
          $item->display('name: ', 'cn', NULL, NULL);
          $item->display('title: ', 'title', NULL, NULL);
          $item->display('dept: ', 'ou', NULL, NULL);
          $item->display('home: ', 'homephone', "phoneHREF", 'phone');
          $item->display('phone: ', 'telephonenumber', "phoneHREF", 'phone');
          $item->display('fax: ', 'facsimiletelephonenumber', "phoneHREF", 'phone');
          $item->display('address: ', 'address');
          $item->display('email: ', 'mail', "mailHREF", 'email');
          $item->display('office: ', 'postaladdress', "officeURL", 'map');
        ?>
	</table>
	</div>
	

<? 

$page->content_end(); 
$page->nav_link("index.php", "People Directory");

?>
