<?php
$page->title('MIT People Directory: Detail')
     ->header('People Directory');

class Item {
  private $person;
  private $first = True;

  public function __construct($person)
  {
    $this->person = $person;
  }

  public function display($label, $field, $href=NULL, $class=NULL)
  {
    foreach($this->person->getField($field) as $value) {
      if ($this->first) {
        $this->first = False;
      } else {
        echo '<br />';
      }

      if ($href !== NULL) {
        $value = '<a href="' . $href($value) . '" class="' . $class . '">'
               . $value . '</a>';
      }
      ?>
      <span class="label"><?=$label?></span>
      <span class="value"><?=$value?></span>
      <?
    }
  }
}

$item = new Item($person);

$page->content_begin();
?>
	<p class="nav">
        <?
          $item->display('name', 'cn', NULL, NULL);
          $item->display('title', 'title', NULL, NULL);
          $item->display('dept', 'ou', NULL, NULL);
          $item->display('home', 'homephone', "phoneHREF", 'phone');
          $item->display('phone', 'telephonenumber', "phoneHREF", 'phone');
          $item->display('fax', 'facsimiletelephonenumber', "phoneHREF", 'phone');
          $item->display('address', 'address');
          $item->display('email', 'mail', "mailHREF");
          $item->display('office', 'physicaldeliveryofficename', "mapURL");
        ?>
	</p>

<? 

$page->content_end(); 
$page->nav_link("index.php", "People Directory Home");

?>
